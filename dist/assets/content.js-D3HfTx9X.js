(function(){console.log("[FB Ads Analyzer] Content script loaded");
chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
  if (request.action === "startScraping") {
    console.log("[FB Ads Analyzer] Starting scraping process");
    injectScraperAndVisualizer(request.aiConfig);
    sendResponse({ status: "started" });
  } else if (request.action === "loadData" || request.action === "importData") {
    console.log("[FB Ads Analyzer] Loading imported data");
    injectVisualizerWithData(request.data, request.aiConfig);
    sendResponse({ status: "loaded" });
  } else if (request.action === "checkExisting") {
    console.log("[FB Ads Analyzer] Checking for existing overlay");
    const hasOverlay = !!document.getElementById("fbAdsAnalyzerOverlay");
    sendResponse({ hasOverlay });
  } else if (request.action === "reopenOverlay") {
    console.log("[FB Ads Analyzer] Reopening overlay");
    const event = new CustomEvent("fbAdsReopen");
    document.dispatchEvent(event);
    sendResponse({ status: "reopened" });
  }
  return true;
});
document.addEventListener("fbAdsAnalyzeRequest", (e) => {
  const { systemPrompt, userContent } = e.detail;
  console.log("[FB Ads Analyzer] Proxying AI request to background");
  chrome.runtime.sendMessage({
    action: "analyzeAI",
    payload: { systemPrompt, userContent }
  }, (response) => {
    const event = new CustomEvent("fbAdsAnalyzeResponse", {
      detail: response
    });
    document.dispatchEvent(event);
  });
});
function injectScraperAndVisualizer(aiConfig) {
  const existingOverlay = document.getElementById("fbAdsAnalyzerOverlay");
  const isScraperLoaded = document.body.getAttribute("data-fb-ads-scraper-loaded") === "true";
  if (existingOverlay) {
    if (isScraperLoaded) {
      console.log("[FB Ads Analyzer] Already running, restarting analysis...");
      document.dispatchEvent(new CustomEvent("fbAdsRestart"));
    } else {
      console.log("[FB Ads Analyzer] Visualizer exists but scraper missing. Injecting scraper...");
      const scraperScript2 = document.createElement("script");
      scraperScript2.src = chrome.runtime.getURL("src/injected.js");
      scraperScript2.onload = function() {
        this.remove();
      };
      (document.head || document.documentElement).appendChild(scraperScript2);
    }
    if (aiConfig) {
      setTimeout(() => {
        const event = new CustomEvent("fbAdsConfig", { detail: aiConfig });
        document.dispatchEvent(event);
      }, 500);
    }
    return;
  }
  let configEl = document.getElementById("fbAdsConfig");
  if (!configEl) {
    configEl = document.createElement("div");
    configEl.id = "fbAdsConfig";
    configEl.style.display = "none";
    document.body.appendChild(configEl);
  }
  configEl.dataset.logoUrl = chrome.runtime.getURL("logo.jpg");
  const scraperScript = document.createElement("script");
  scraperScript.src = chrome.runtime.getURL("src/injected.js");
  scraperScript.onload = function() {
    this.remove();
  };
  (document.head || document.documentElement).appendChild(scraperScript);
  const visualizerScript = document.createElement("script");
  visualizerScript.src = chrome.runtime.getURL("src/visualizer.js");
  visualizerScript.onload = function() {
    this.remove();
  };
  (document.head || document.documentElement).appendChild(visualizerScript);
  const styleLink = document.createElement("link");
  styleLink.rel = "stylesheet";
  styleLink.href = chrome.runtime.getURL("src/visualizer.css");
  (document.head || document.documentElement).appendChild(styleLink);
  if (aiConfig) {
    setTimeout(() => {
      const event = new CustomEvent("fbAdsConfig", { detail: aiConfig });
      document.dispatchEvent(event);
    }, 500);
  }
}
function injectVisualizerWithData(data, aiConfig) {
  const existingOverlay = document.getElementById("fbAdsAnalyzerOverlay");
  if (existingOverlay) {
    console.log("[FB Ads Analyzer] Visualizer exists, sending data via CustomEvent");
    const event = new CustomEvent("fbAdsImportData", { detail: { ...data, isImported: true } });
    document.dispatchEvent(event);
    if (aiConfig) {
      setTimeout(() => {
        const configEvent = new CustomEvent("fbAdsConfig", { detail: aiConfig });
        document.dispatchEvent(configEvent);
      }, 200);
    }
    return;
  }
  let configEl = document.getElementById("fbAdsConfig");
  if (!configEl) {
    configEl = document.createElement("div");
    configEl.id = "fbAdsConfig";
    configEl.style.display = "none";
    document.body.appendChild(configEl);
  }
  configEl.dataset.logoUrl = chrome.runtime.getURL("logo.jpg");
  const dataContainer = document.createElement("div");
  dataContainer.id = "fbAdsImportedData";
  dataContainer.style.display = "none";
  dataContainer.textContent = JSON.stringify({ ...data, isImported: true });
  document.body.appendChild(dataContainer);
  const visualizerScript = document.createElement("script");
  visualizerScript.src = chrome.runtime.getURL("src/visualizer.js");
  visualizerScript.onload = function() {
    this.remove();
  };
  (document.head || document.documentElement).appendChild(visualizerScript);
  if (!document.querySelector('link[href*="visualizer.css"]')) {
    const styleLink = document.createElement("link");
    styleLink.rel = "stylesheet";
    styleLink.href = chrome.runtime.getURL("src/visualizer.css");
    (document.head || document.documentElement).appendChild(styleLink);
  }
  if (aiConfig) {
    setTimeout(() => {
      const event = new CustomEvent("fbAdsConfig", { detail: aiConfig });
      document.dispatchEvent(event);
    }, 500);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudC5qcy1EM0hmVHg5WC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvbnRlbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29udGVudCBzY3JpcHQgLSBydW5zIGluIGlzb2xhdGVkIGNvbnRleHQgYnV0IGNhbiBpbmplY3QgaW50byBwYWdlXHJcbmNvbnNvbGUubG9nKCdbRkIgQWRzIEFuYWx5emVyXSBDb250ZW50IHNjcmlwdCBsb2FkZWQnKTtcclxuXHJcbi8vIExpc3RlbiBmb3IgbWVzc2FnZXMgZnJvbSBwb3B1cFxyXG5jaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoKHJlcXVlc3QsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSA9PiB7XHJcbiAgaWYgKHJlcXVlc3QuYWN0aW9uID09PSAnc3RhcnRTY3JhcGluZycpIHtcclxuICAgIGNvbnNvbGUubG9nKCdbRkIgQWRzIEFuYWx5emVyXSBTdGFydGluZyBzY3JhcGluZyBwcm9jZXNzJyk7XHJcbiAgICBpbmplY3RTY3JhcGVyQW5kVmlzdWFsaXplcihyZXF1ZXN0LmFpQ29uZmlnKTtcclxuICAgIHNlbmRSZXNwb25zZSh7IHN0YXR1czogJ3N0YXJ0ZWQnIH0pO1xyXG4gIH0gZWxzZSBpZiAocmVxdWVzdC5hY3Rpb24gPT09ICdsb2FkRGF0YScgfHwgcmVxdWVzdC5hY3Rpb24gPT09ICdpbXBvcnREYXRhJykge1xyXG4gICAgY29uc29sZS5sb2coJ1tGQiBBZHMgQW5hbHl6ZXJdIExvYWRpbmcgaW1wb3J0ZWQgZGF0YScpO1xyXG4gICAgaW5qZWN0VmlzdWFsaXplcldpdGhEYXRhKHJlcXVlc3QuZGF0YSwgcmVxdWVzdC5haUNvbmZpZyk7XHJcbiAgICBzZW5kUmVzcG9uc2UoeyBzdGF0dXM6ICdsb2FkZWQnIH0pO1xyXG4gIH0gZWxzZSBpZiAocmVxdWVzdC5hY3Rpb24gPT09ICdjaGVja0V4aXN0aW5nJykge1xyXG4gICAgY29uc29sZS5sb2coJ1tGQiBBZHMgQW5hbHl6ZXJdIENoZWNraW5nIGZvciBleGlzdGluZyBvdmVybGF5Jyk7XHJcbiAgICBjb25zdCBoYXNPdmVybGF5ID0gISFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmJBZHNBbmFseXplck92ZXJsYXknKTtcclxuICAgIHNlbmRSZXNwb25zZSh7IGhhc092ZXJsYXkgfSk7XHJcbiAgfSBlbHNlIGlmIChyZXF1ZXN0LmFjdGlvbiA9PT0gJ3Jlb3Blbk92ZXJsYXknKSB7XHJcbiAgICBjb25zb2xlLmxvZygnW0ZCIEFkcyBBbmFseXplcl0gUmVvcGVuaW5nIG92ZXJsYXknKTtcclxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdmYkFkc1Jlb3BlbicpO1xyXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICBzZW5kUmVzcG9uc2UoeyBzdGF0dXM6ICdyZW9wZW5lZCcgfSk7XHJcbiAgfVxyXG4gIHJldHVybiB0cnVlO1xyXG59KTtcclxuXHJcbi8vIExpc3RlbiBmb3IgYW5hbHlzaXMgcmVxdWVzdHMgZnJvbSB2aXN1YWxpemVyICh0byBwcm94eSB0aHJvdWdoIGJhY2tncm91bmQpXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZiQWRzQW5hbHl6ZVJlcXVlc3QnLCAoZSkgPT4ge1xyXG4gIGNvbnN0IHsgc3lzdGVtUHJvbXB0LCB1c2VyQ29udGVudCB9ID0gZS5kZXRhaWw7XHJcblxyXG4gIGNvbnNvbGUubG9nKCdbRkIgQWRzIEFuYWx5emVyXSBQcm94eWluZyBBSSByZXF1ZXN0IHRvIGJhY2tncm91bmQnKTtcclxuXHJcbiAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xyXG4gICAgYWN0aW9uOiAnYW5hbHl6ZUFJJyxcclxuICAgIHBheWxvYWQ6IHsgc3lzdGVtUHJvbXB0LCB1c2VyQ29udGVudCB9XHJcbiAgfSwgKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAvLyBEaXNwYXRjaCByZXNwb25zZSBiYWNrIHRvIHZpc3VhbGl6ZXJcclxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdmYkFkc0FuYWx5emVSZXNwb25zZScsIHtcclxuICAgICAgZGV0YWlsOiByZXNwb25zZVxyXG4gICAgfSk7XHJcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICB9KTtcclxufSk7XHJcblxyXG4vLyBJbmplY3QgYm90aCBzY3JhcGVyIGFuZCB2aXN1YWxpemVyIGludG8gdGhlIHBhZ2UgY29udGV4dFxyXG5mdW5jdGlvbiBpbmplY3RTY3JhcGVyQW5kVmlzdWFsaXplcihhaUNvbmZpZykge1xyXG4gIC8vIENoZWNrIGlmIGFscmVhZHkgZXhpc3RzXHJcbiAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBleGlzdHNcclxuICBjb25zdCBleGlzdGluZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmJBZHNBbmFseXplck92ZXJsYXknKTtcclxuICBjb25zdCBpc1NjcmFwZXJMb2FkZWQgPSBkb2N1bWVudC5ib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1mYi1hZHMtc2NyYXBlci1sb2FkZWQnKSA9PT0gJ3RydWUnO1xyXG5cclxuICBpZiAoZXhpc3RpbmdPdmVybGF5KSB7XHJcbiAgICBpZiAoaXNTY3JhcGVyTG9hZGVkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbRkIgQWRzIEFuYWx5emVyXSBBbHJlYWR5IHJ1bm5pbmcsIHJlc3RhcnRpbmcgYW5hbHlzaXMuLi4nKTtcclxuICAgICAgLy8gRGlzcGF0Y2ggcmVzdGFydCBldmVudCBoYW5kbGVkIGJ5IGluamVjdGVkLmpzXHJcbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdmYkFkc1Jlc3RhcnQnKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0ZCIEFkcyBBbmFseXplcl0gVmlzdWFsaXplciBleGlzdHMgYnV0IHNjcmFwZXIgbWlzc2luZy4gSW5qZWN0aW5nIHNjcmFwZXIuLi4nKTtcclxuICAgICAgLy8gSW5qZWN0IHRoZSBzY3JhcGVyXHJcbiAgICAgIGNvbnN0IHNjcmFwZXJTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgc2NyYXBlclNjcmlwdC5zcmMgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoJ3NyYy9pbmplY3RlZC5qcycpO1xyXG4gICAgICBzY3JhcGVyU2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgICB9O1xyXG4gICAgICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHNjcmFwZXJTY3JpcHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFsc28gZW5zdXJlIHdlIHVwZGF0ZSBBSSBjb25maWdcclxuICAgIGlmIChhaUNvbmZpZykge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnZmJBZHNDb25maWcnLCB7IGRldGFpbDogYWlDb25maWcgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgIH0sIDUwMCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvLyBJbmplY3QgY29uZmlndXJhdGlvbiB2aWEgZGF0YSBhdHRyaWJ1dGUgKENTUC1jb21wbGlhbnQpXHJcbiAgbGV0IGNvbmZpZ0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZiQWRzQ29uZmlnJyk7XHJcbiAgaWYgKCFjb25maWdFbCkge1xyXG4gICAgY29uZmlnRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbmZpZ0VsLmlkID0gJ2ZiQWRzQ29uZmlnJztcclxuICAgIGNvbmZpZ0VsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbmZpZ0VsKTtcclxuICB9XHJcbiAgY29uZmlnRWwuZGF0YXNldC5sb2dvVXJsID0gY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKCdsb2dvLmpwZycpO1xyXG5cclxuICAvLyBJbmplY3QgdGhlIHNjcmFwZXJcclxuICBjb25zdCBzY3JhcGVyU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgc2NyYXBlclNjcmlwdC5zcmMgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoJ3NyYy9pbmplY3RlZC5qcycpO1xyXG4gIHNjcmFwZXJTY3JpcHQub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5yZW1vdmUoKTtcclxuICB9O1xyXG4gIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyYXBlclNjcmlwdCk7XHJcblxyXG4gIC8vIEluamVjdCB0aGUgdmlzdWFsaXplclxyXG4gIGNvbnN0IHZpc3VhbGl6ZXJTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICB2aXN1YWxpemVyU2NyaXB0LnNyYyA9IGNocm9tZS5ydW50aW1lLmdldFVSTCgnc3JjL3Zpc3VhbGl6ZXIuanMnKTtcclxuICB2aXN1YWxpemVyU2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMucmVtb3ZlKCk7XHJcbiAgfTtcclxuICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHZpc3VhbGl6ZXJTY3JpcHQpO1xyXG5cclxuICAvLyBJbmplY3Qgc3R5bGVzXHJcbiAgY29uc3Qgc3R5bGVMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xyXG4gIHN0eWxlTGluay5yZWwgPSAnc3R5bGVzaGVldCc7XHJcbiAgc3R5bGVMaW5rLmhyZWYgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoJ3NyYy92aXN1YWxpemVyLmNzcycpO1xyXG4gIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc3R5bGVMaW5rKTtcclxuXHJcbiAgLy8gU2VuZCBBSSBDb25maWcgaWYgYXZhaWxhYmxlXHJcbiAgaWYgKGFpQ29uZmlnKSB7XHJcbiAgICAvLyBXYWl0IHNsaWdodGx5IGZvciB2aXN1YWxpemVyIHRvIGxvYWQgbGlzdGVuZXJzXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2ZiQWRzQ29uZmlnJywgeyBkZXRhaWw6IGFpQ29uZmlnIH0pO1xyXG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgIH0sIDUwMCk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBJbmplY3QgdmlzdWFsaXplciBhbmQgc2VuZCBpbXBvcnRlZCBkYXRhXHJcbmZ1bmN0aW9uIGluamVjdFZpc3VhbGl6ZXJXaXRoRGF0YShkYXRhLCBhaUNvbmZpZykge1xyXG4gIC8vIENoZWNrIGlmIHZpc3VhbGl6ZXIgYWxyZWFkeSBleGlzdHNcclxuICBjb25zdCBleGlzdGluZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmJBZHNBbmFseXplck92ZXJsYXknKTtcclxuXHJcbiAgaWYgKGV4aXN0aW5nT3ZlcmxheSkge1xyXG4gICAgLy8gVmlzdWFsaXplciBhbHJlYWR5IGV4aXN0cywgc2VuZCBkYXRhIHZpYSBDdXN0b21FdmVudFxyXG4gICAgY29uc29sZS5sb2coJ1tGQiBBZHMgQW5hbHl6ZXJdIFZpc3VhbGl6ZXIgZXhpc3RzLCBzZW5kaW5nIGRhdGEgdmlhIEN1c3RvbUV2ZW50Jyk7XHJcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnZmJBZHNJbXBvcnREYXRhJywgeyBkZXRhaWw6IHsgLi4uZGF0YSwgaXNJbXBvcnRlZDogdHJ1ZSB9IH0pO1xyXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcblxyXG4gICAgaWYgKGFpQ29uZmlnKSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbmZpZ0V2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdmYkFkc0NvbmZpZycsIHsgZGV0YWlsOiBhaUNvbmZpZyB9KTtcclxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGNvbmZpZ0V2ZW50KTtcclxuICAgICAgfSwgMjAwKTtcclxuICAgIH1cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIEluamVjdCBjb25maWd1cmF0aW9uIHZpYSBkYXRhIGF0dHJpYnV0ZSAoQ1NQLWNvbXBsaWFudClcclxuICBsZXQgY29uZmlnRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmJBZHNDb25maWcnKTtcclxuICBpZiAoIWNvbmZpZ0VsKSB7XHJcbiAgICBjb25maWdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uZmlnRWwuaWQgPSAnZmJBZHNDb25maWcnO1xyXG4gICAgY29uZmlnRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29uZmlnRWwpO1xyXG4gIH1cclxuICBjb25maWdFbC5kYXRhc2V0LmxvZ29VcmwgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoJ2xvZ28uanBnJyk7XHJcblxyXG4gIC8vIFN0b3JlIGRhdGEgaW4gRE9NIGZvciB2aXN1YWxpemVyIHRvIHBpY2sgdXAgKENTUC1jb21wbGlhbnQpXHJcbiAgY29uc3QgZGF0YUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGRhdGFDb250YWluZXIuaWQgPSAnZmJBZHNJbXBvcnRlZERhdGEnO1xyXG4gIGRhdGFDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICBkYXRhQ29udGFpbmVyLnRleHRDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoeyAuLi5kYXRhLCBpc0ltcG9ydGVkOiB0cnVlIH0pO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGF0YUNvbnRhaW5lcik7XHJcblxyXG4gIC8vIEluamVjdCB0aGUgdmlzdWFsaXplclxyXG4gIGNvbnN0IHZpc3VhbGl6ZXJTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICB2aXN1YWxpemVyU2NyaXB0LnNyYyA9IGNocm9tZS5ydW50aW1lLmdldFVSTCgnc3JjL3Zpc3VhbGl6ZXIuanMnKTtcclxuICB2aXN1YWxpemVyU2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMucmVtb3ZlKCk7XHJcbiAgfTtcclxuICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHZpc3VhbGl6ZXJTY3JpcHQpO1xyXG5cclxuICAvLyBJbmplY3Qgc3R5bGVzXHJcbiAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdsaW5rW2hyZWYqPVwidmlzdWFsaXplci5jc3NcIl0nKSkge1xyXG4gICAgY29uc3Qgc3R5bGVMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xyXG4gICAgc3R5bGVMaW5rLnJlbCA9ICdzdHlsZXNoZWV0JztcclxuICAgIHN0eWxlTGluay5ocmVmID0gY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKCdzcmMvdmlzdWFsaXplci5jc3MnKTtcclxuICAgIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc3R5bGVMaW5rKTtcclxuICB9XHJcblxyXG4gIC8vIFNlbmQgQUkgQ29uZmlnIGlmIGF2YWlsYWJsZVxyXG4gIGlmIChhaUNvbmZpZykge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdmYkFkc0NvbmZpZycsIHsgZGV0YWlsOiBhaUNvbmZpZyB9KTtcclxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9LCA1MDApO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJzY3JhcGVyU2NyaXB0Il0sIm1hcHBpbmdzIjoiQUFDQSxRQUFRLElBQUkseUNBQXlDO0FBR3JELE9BQU8sUUFBUSxVQUFVLFlBQVksQ0FBQyxTQUFTLFFBQVEsaUJBQWlCO0FBQ3RFLE1BQUksUUFBUSxXQUFXLGlCQUFpQjtBQUN0QyxZQUFRLElBQUksNkNBQTZDO0FBQ3pELCtCQUEyQixRQUFRLFFBQVE7QUFDM0MsaUJBQWEsRUFBRSxRQUFRLFVBQVMsQ0FBRTtBQUFBLEVBQ3BDLFdBQVcsUUFBUSxXQUFXLGNBQWMsUUFBUSxXQUFXLGNBQWM7QUFDM0UsWUFBUSxJQUFJLHlDQUF5QztBQUNyRCw2QkFBeUIsUUFBUSxNQUFNLFFBQVEsUUFBUTtBQUN2RCxpQkFBYSxFQUFFLFFBQVEsU0FBUSxDQUFFO0FBQUEsRUFDbkMsV0FBVyxRQUFRLFdBQVcsaUJBQWlCO0FBQzdDLFlBQVEsSUFBSSxpREFBaUQ7QUFDN0QsVUFBTSxhQUFhLENBQUMsQ0FBQyxTQUFTLGVBQWUsc0JBQXNCO0FBQ25FLGlCQUFhLEVBQUUsV0FBVSxDQUFFO0FBQUEsRUFDN0IsV0FBVyxRQUFRLFdBQVcsaUJBQWlCO0FBQzdDLFlBQVEsSUFBSSxxQ0FBcUM7QUFDakQsVUFBTSxRQUFRLElBQUksWUFBWSxhQUFhO0FBQzNDLGFBQVMsY0FBYyxLQUFLO0FBQzVCLGlCQUFhLEVBQUUsUUFBUSxXQUFVLENBQUU7QUFBQSxFQUNyQztBQUNBLFNBQU87QUFDVCxDQUFDO0FBR0QsU0FBUyxpQkFBaUIsdUJBQXVCLENBQUMsTUFBTTtBQUN0RCxRQUFNLEVBQUUsY0FBYyxnQkFBZ0IsRUFBRTtBQUV4QyxVQUFRLElBQUkscURBQXFEO0FBRWpFLFNBQU8sUUFBUSxZQUFZO0FBQUEsSUFDekIsUUFBUTtBQUFBLElBQ1IsU0FBUyxFQUFFLGNBQWMsWUFBVztBQUFB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
})()
