(function(){console.log("[FB Ads Analyzer] Content script loaded");
chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
  if (request.action === "startScraping") {
    console.log("[FB Ads Analyzer] Starting scraping process");
    injectScraperAndVisualizer(request.aiConfig);
    sendResponse({ status: "started" });
  } else if (request.action === "loadData" || request.action === "importData") {
    console.log("[FB Ads Analyzer] Loading imported data");
    injectVisualizerWithData(request.data, request.aiConfig);
    sendResponse({ status: "loaded" });
  } else if (request.action === "checkExisting") {
    console.log("[FB Ads Analyzer] Checking for existing overlay");
    const hasOverlay = !!document.getElementById("fbAdsAnalyzerOverlay");
    sendResponse({ hasOverlay });
  } else if (request.action === "reopenOverlay") {
    console.log("[FB Ads Analyzer] Reopening overlay");
    const event = new CustomEvent("fbAdsReopen");
    document.dispatchEvent(event);
    sendResponse({ status: "reopened" });
  }
  return true;
});
document.addEventListener("fbAdsAnalyzeRequest", (e) => {
  const { apiKey, systemPrompt, userContent } = e.detail;
  console.log("[FB Ads Analyzer] Proxying AI request to background");
  chrome.runtime.sendMessage({
    action: "analyzeAI",
    payload: { apiKey, systemPrompt, userContent }
  }, (response) => {
    const event = new CustomEvent("fbAdsAnalyzeResponse", {
      detail: response
    });
    document.dispatchEvent(event);
  });
});
function injectScraperAndVisualizer(aiConfig) {
  const existingOverlay = document.getElementById("fbAdsAnalyzerOverlay");
  const isScraperLoaded = document.body.getAttribute("data-fb-ads-scraper-loaded") === "true";
  if (existingOverlay) {
    if (isScraperLoaded) {
      console.log("[FB Ads Analyzer] Already running, restarting analysis...");
      document.dispatchEvent(new CustomEvent("fbAdsRestart"));
    } else {
      console.log("[FB Ads Analyzer] Visualizer exists but scraper missing. Injecting scraper...");
      const scraperScript2 = document.createElement("script");
      scraperScript2.src = chrome.runtime.getURL("src/injected.js");
      scraperScript2.onload = function() {
        this.remove();
      };
      (document.head || document.documentElement).appendChild(scraperScript2);
    }
    if (aiConfig) {
      setTimeout(() => {
        const event = new CustomEvent("fbAdsConfig", { detail: aiConfig });
        document.dispatchEvent(event);
      }, 500);
    }
    return;
  }
  let configEl = document.getElementById("fbAdsConfig");
  if (!configEl) {
    configEl = document.createElement("div");
    configEl.id = "fbAdsConfig";
    configEl.style.display = "none";
    document.body.appendChild(configEl);
  }
  configEl.dataset.logoUrl = chrome.runtime.getURL("logo.jpg");
  const scraperScript = document.createElement("script");
  scraperScript.src = chrome.runtime.getURL("src/injected.js");
  scraperScript.onload = function() {
    this.remove();
  };
  (document.head || document.documentElement).appendChild(scraperScript);
  const visualizerScript = document.createElement("script");
  visualizerScript.src = chrome.runtime.getURL("src/visualizer.js");
  visualizerScript.onload = function() {
    this.remove();
  };
  (document.head || document.documentElement).appendChild(visualizerScript);
  const styleLink = document.createElement("link");
  styleLink.rel = "stylesheet";
  styleLink.href = chrome.runtime.getURL("src/visualizer.css");
  (document.head || document.documentElement).appendChild(styleLink);
  if (aiConfig) {
    setTimeout(() => {
      const event = new CustomEvent("fbAdsConfig", { detail: aiConfig });
      document.dispatchEvent(event);
    }, 500);
  }
}
function injectVisualizerWithData(data, aiConfig) {
  const existingOverlay = document.getElementById("fbAdsAnalyzerOverlay");
  if (existingOverlay) {
    console.log("[FB Ads Analyzer] Visualizer exists, sending data via CustomEvent");
    const event = new CustomEvent("fbAdsImportData", { detail: { ...data, isImported: true } });
    document.dispatchEvent(event);
    if (aiConfig) {
      setTimeout(() => {
        const configEvent = new CustomEvent("fbAdsConfig", { detail: aiConfig });
        document.dispatchEvent(configEvent);
      }, 200);
    }
    return;
  }
  let configEl = document.getElementById("fbAdsConfig");
  if (!configEl) {
    configEl = document.createElement("div");
    configEl.id = "fbAdsConfig";
    configEl.style.display = "none";
    document.body.appendChild(configEl);
  }
  configEl.dataset.logoUrl = chrome.runtime.getURL("logo.jpg");
  const dataContainer = document.createElement("div");
  dataContainer.id = "fbAdsImportedData";
  dataContainer.style.display = "none";
  dataContainer.textContent = JSON.stringify({ ...data, isImported: true });
  document.body.appendChild(dataContainer);
  const visualizerScript = document.createElement("script");
  visualizerScript.src = chrome.runtime.getURL("src/visualizer.js");
  visualizerScript.onload = function() {
    this.remove();
  };
  (document.head || document.documentElement).appendChild(visualizerScript);
  if (!document.querySelector('link[href*="visualizer.css"]')) {
    const styleLink = document.createElement("link");
    styleLink.rel = "stylesheet";
    styleLink.href = chrome.runtime.getURL("src/visualizer.css");
    (document.head || document.documentElement).appendChild(styleLink);
  }
  if (aiConfig) {
    setTimeout(() => {
      const event = new CustomEvent("fbAdsConfig", { detail: aiConfig });
      document.dispatchEvent(event);
    }, 500);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudC5qcy1EM180aHZVTS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvbnRlbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29udGVudCBzY3JpcHQgLSBydW5zIGluIGlzb2xhdGVkIGNvbnRleHQgYnV0IGNhbiBpbmplY3QgaW50byBwYWdlXG5jb25zb2xlLmxvZygnW0ZCIEFkcyBBbmFseXplcl0gQ29udGVudCBzY3JpcHQgbG9hZGVkJyk7XG5cbi8vIExpc3RlbiBmb3IgbWVzc2FnZXMgZnJvbSBwb3B1cFxuY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKChyZXF1ZXN0LCBzZW5kZXIsIHNlbmRSZXNwb25zZSkgPT4ge1xuICBpZiAocmVxdWVzdC5hY3Rpb24gPT09ICdzdGFydFNjcmFwaW5nJykge1xuICAgIGNvbnNvbGUubG9nKCdbRkIgQWRzIEFuYWx5emVyXSBTdGFydGluZyBzY3JhcGluZyBwcm9jZXNzJyk7XG4gICAgaW5qZWN0U2NyYXBlckFuZFZpc3VhbGl6ZXIocmVxdWVzdC5haUNvbmZpZyk7XG4gICAgc2VuZFJlc3BvbnNlKHsgc3RhdHVzOiAnc3RhcnRlZCcgfSk7XG4gIH0gZWxzZSBpZiAocmVxdWVzdC5hY3Rpb24gPT09ICdsb2FkRGF0YScgfHwgcmVxdWVzdC5hY3Rpb24gPT09ICdpbXBvcnREYXRhJykge1xuICAgIGNvbnNvbGUubG9nKCdbRkIgQWRzIEFuYWx5emVyXSBMb2FkaW5nIGltcG9ydGVkIGRhdGEnKTtcbiAgICBpbmplY3RWaXN1YWxpemVyV2l0aERhdGEocmVxdWVzdC5kYXRhLCByZXF1ZXN0LmFpQ29uZmlnKTtcbiAgICBzZW5kUmVzcG9uc2UoeyBzdGF0dXM6ICdsb2FkZWQnIH0pO1xuICB9IGVsc2UgaWYgKHJlcXVlc3QuYWN0aW9uID09PSAnY2hlY2tFeGlzdGluZycpIHtcbiAgICBjb25zb2xlLmxvZygnW0ZCIEFkcyBBbmFseXplcl0gQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIG92ZXJsYXknKTtcbiAgICBjb25zdCBoYXNPdmVybGF5ID0gISFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmJBZHNBbmFseXplck92ZXJsYXknKTtcbiAgICBzZW5kUmVzcG9uc2UoeyBoYXNPdmVybGF5IH0pO1xuICB9IGVsc2UgaWYgKHJlcXVlc3QuYWN0aW9uID09PSAncmVvcGVuT3ZlcmxheScpIHtcbiAgICBjb25zb2xlLmxvZygnW0ZCIEFkcyBBbmFseXplcl0gUmVvcGVuaW5nIG92ZXJsYXknKTtcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnZmJBZHNSZW9wZW4nKTtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICBzZW5kUmVzcG9uc2UoeyBzdGF0dXM6ICdyZW9wZW5lZCcgfSk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59KTtcblxuLy8gTGlzdGVuIGZvciBhbmFseXNpcyByZXF1ZXN0cyBmcm9tIHZpc3VhbGl6ZXIgKHRvIHByb3h5IHRocm91Z2ggYmFja2dyb3VuZClcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZiQWRzQW5hbHl6ZVJlcXVlc3QnLCAoZSkgPT4ge1xuICBjb25zdCB7IGFwaUtleSwgc3lzdGVtUHJvbXB0LCB1c2VyQ29udGVudCB9ID0gZS5kZXRhaWw7XG5cbiAgY29uc29sZS5sb2coJ1tGQiBBZHMgQW5hbHl6ZXJdIFByb3h5aW5nIEFJIHJlcXVlc3QgdG8gYmFja2dyb3VuZCcpO1xuXG4gIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICBhY3Rpb246ICdhbmFseXplQUknLFxuICAgIHBheWxvYWQ6IHsgYXBpS2V5LCBzeXN0ZW1Qcm9tcHQsIHVzZXJDb250ZW50IH1cbiAgfSwgKHJlc3BvbnNlKSA9PiB7XG4gICAgLy8gRGlzcGF0Y2ggcmVzcG9uc2UgYmFjayB0byB2aXN1YWxpemVyXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2ZiQWRzQW5hbHl6ZVJlc3BvbnNlJywge1xuICAgICAgZGV0YWlsOiByZXNwb25zZVxuICAgIH0pO1xuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9KTtcbn0pO1xuXG4vLyBJbmplY3QgYm90aCBzY3JhcGVyIGFuZCB2aXN1YWxpemVyIGludG8gdGhlIHBhZ2UgY29udGV4dFxuZnVuY3Rpb24gaW5qZWN0U2NyYXBlckFuZFZpc3VhbGl6ZXIoYWlDb25maWcpIHtcbiAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBleGlzdHNcbiAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBleGlzdHNcbiAgY29uc3QgZXhpc3RpbmdPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZiQWRzQW5hbHl6ZXJPdmVybGF5Jyk7XG4gIGNvbnN0IGlzU2NyYXBlckxvYWRlZCA9IGRvY3VtZW50LmJvZHkuZ2V0QXR0cmlidXRlKCdkYXRhLWZiLWFkcy1zY3JhcGVyLWxvYWRlZCcpID09PSAndHJ1ZSc7XG5cbiAgaWYgKGV4aXN0aW5nT3ZlcmxheSkge1xuICAgIGlmIChpc1NjcmFwZXJMb2FkZWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbRkIgQWRzIEFuYWx5emVyXSBBbHJlYWR5IHJ1bm5pbmcsIHJlc3RhcnRpbmcgYW5hbHlzaXMuLi4nKTtcbiAgICAgIC8vIERpc3BhdGNoIHJlc3RhcnQgZXZlbnQgaGFuZGxlZCBieSBpbmplY3RlZC5qc1xuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2ZiQWRzUmVzdGFydCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1tGQiBBZHMgQW5hbHl6ZXJdIFZpc3VhbGl6ZXIgZXhpc3RzIGJ1dCBzY3JhcGVyIG1pc3NpbmcuIEluamVjdGluZyBzY3JhcGVyLi4uJyk7XG4gICAgICAvLyBJbmplY3QgdGhlIHNjcmFwZXJcbiAgICAgIGNvbnN0IHNjcmFwZXJTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIHNjcmFwZXJTY3JpcHQuc3JjID0gY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKCdzcmMvaW5qZWN0ZWQuanMnKTtcbiAgICAgIHNjcmFwZXJTY3JpcHQub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbW92ZSgpO1xuICAgICAgfTtcbiAgICAgIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyYXBlclNjcmlwdCk7XG4gICAgfVxuXG4gICAgLy8gQWxzbyBlbnN1cmUgd2UgdXBkYXRlIEFJIGNvbmZpZ1xuICAgIGlmIChhaUNvbmZpZykge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdmYkFkc0NvbmZpZycsIHsgZGV0YWlsOiBhaUNvbmZpZyB9KTtcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB9LCA1MDApO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJbmplY3QgY29uZmlndXJhdGlvbiB2aWEgZGF0YSBhdHRyaWJ1dGUgKENTUC1jb21wbGlhbnQpXG4gIGxldCBjb25maWdFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmYkFkc0NvbmZpZycpO1xuICBpZiAoIWNvbmZpZ0VsKSB7XG4gICAgY29uZmlnRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25maWdFbC5pZCA9ICdmYkFkc0NvbmZpZyc7XG4gICAgY29uZmlnRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbmZpZ0VsKTtcbiAgfVxuICBjb25maWdFbC5kYXRhc2V0LmxvZ29VcmwgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoJ2xvZ28uanBnJyk7XG5cbiAgLy8gSW5qZWN0IHRoZSBzY3JhcGVyXG4gIGNvbnN0IHNjcmFwZXJTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgc2NyYXBlclNjcmlwdC5zcmMgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoJ3NyYy9pbmplY3RlZC5qcycpO1xuICBzY3JhcGVyU2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlbW92ZSgpO1xuICB9O1xuICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHNjcmFwZXJTY3JpcHQpO1xuXG4gIC8vIEluamVjdCB0aGUgdmlzdWFsaXplclxuICBjb25zdCB2aXN1YWxpemVyU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gIHZpc3VhbGl6ZXJTY3JpcHQuc3JjID0gY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKCdzcmMvdmlzdWFsaXplci5qcycpO1xuICB2aXN1YWxpemVyU2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlbW92ZSgpO1xuICB9O1xuICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHZpc3VhbGl6ZXJTY3JpcHQpO1xuXG4gIC8vIEluamVjdCBzdHlsZXNcbiAgY29uc3Qgc3R5bGVMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICBzdHlsZUxpbmsucmVsID0gJ3N0eWxlc2hlZXQnO1xuICBzdHlsZUxpbmsuaHJlZiA9IGNocm9tZS5ydW50aW1lLmdldFVSTCgnc3JjL3Zpc3VhbGl6ZXIuY3NzJyk7XG4gIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc3R5bGVMaW5rKTtcblxuICAvLyBTZW5kIEFJIENvbmZpZyBpZiBhdmFpbGFibGVcbiAgaWYgKGFpQ29uZmlnKSB7XG4gICAgLy8gV2FpdCBzbGlnaHRseSBmb3IgdmlzdWFsaXplciB0byBsb2FkIGxpc3RlbmVyc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2ZiQWRzQ29uZmlnJywgeyBkZXRhaWw6IGFpQ29uZmlnIH0pO1xuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfSwgNTAwKTtcbiAgfVxufVxuXG4vLyBJbmplY3QgdmlzdWFsaXplciBhbmQgc2VuZCBpbXBvcnRlZCBkYXRhXG5mdW5jdGlvbiBpbmplY3RWaXN1YWxpemVyV2l0aERhdGEoZGF0YSwgYWlDb25maWcpIHtcbiAgLy8gQ2hlY2sgaWYgdmlzdWFsaXplciBhbHJlYWR5IGV4aXN0c1xuICBjb25zdCBleGlzdGluZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmJBZHNBbmFseXplck92ZXJsYXknKTtcblxuICBpZiAoZXhpc3RpbmdPdmVybGF5KSB7XG4gICAgLy8gVmlzdWFsaXplciBhbHJlYWR5IGV4aXN0cywgc2VuZCBkYXRhIHZpYSBDdXN0b21FdmVudFxuICAgIGNvbnNvbGUubG9nKCdbRkIgQWRzIEFuYWx5emVyXSBWaXN1YWxpemVyIGV4aXN0cywgc2VuZGluZyBkYXRhIHZpYSBDdXN0b21FdmVudCcpO1xuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdmYkFkc0ltcG9ydERhdGEnLCB7IGRldGFpbDogeyAuLi5kYXRhLCBpc0ltcG9ydGVkOiB0cnVlIH0gfSk7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cbiAgICBpZiAoYWlDb25maWcpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zdCBjb25maWdFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnZmJBZHNDb25maWcnLCB7IGRldGFpbDogYWlDb25maWcgfSk7XG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY29uZmlnRXZlbnQpO1xuICAgICAgfSwgMjAwKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSW5qZWN0IGNvbmZpZ3VyYXRpb24gdmlhIGRhdGEgYXR0cmlidXRlIChDU1AtY29tcGxpYW50KVxuICBsZXQgY29uZmlnRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmJBZHNDb25maWcnKTtcbiAgaWYgKCFjb25maWdFbCkge1xuICAgIGNvbmZpZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uZmlnRWwuaWQgPSAnZmJBZHNDb25maWcnO1xuICAgIGNvbmZpZ0VsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb25maWdFbCk7XG4gIH1cbiAgY29uZmlnRWwuZGF0YXNldC5sb2dvVXJsID0gY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKCdsb2dvLmpwZycpO1xuXG4gIC8vIFN0b3JlIGRhdGEgaW4gRE9NIGZvciB2aXN1YWxpemVyIHRvIHBpY2sgdXAgKENTUC1jb21wbGlhbnQpXG4gIGNvbnN0IGRhdGFDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZGF0YUNvbnRhaW5lci5pZCA9ICdmYkFkc0ltcG9ydGVkRGF0YSc7XG4gIGRhdGFDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgZGF0YUNvbnRhaW5lci50ZXh0Q29udGVudCA9IEpTT04uc3RyaW5naWZ5KHsgLi4uZGF0YSwgaXNJbXBvcnRlZDogdHJ1ZSB9KTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkYXRhQ29udGFpbmVyKTtcblxuICAvLyBJbmplY3QgdGhlIHZpc3VhbGl6ZXJcbiAgY29uc3QgdmlzdWFsaXplclNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICB2aXN1YWxpemVyU2NyaXB0LnNyYyA9IGNocm9tZS5ydW50aW1lLmdldFVSTCgnc3JjL3Zpc3VhbGl6ZXIuanMnKTtcbiAgdmlzdWFsaXplclNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZW1vdmUoKTtcbiAgfTtcbiAgKGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hcHBlbmRDaGlsZCh2aXN1YWxpemVyU2NyaXB0KTtcblxuICAvLyBJbmplY3Qgc3R5bGVzXG4gIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbGlua1tocmVmKj1cInZpc3VhbGl6ZXIuY3NzXCJdJykpIHtcbiAgICBjb25zdCBzdHlsZUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG4gICAgc3R5bGVMaW5rLnJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICBzdHlsZUxpbmsuaHJlZiA9IGNocm9tZS5ydW50aW1lLmdldFVSTCgnc3JjL3Zpc3VhbGl6ZXIuY3NzJyk7XG4gICAgKGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hcHBlbmRDaGlsZChzdHlsZUxpbmspO1xuICB9XG5cbiAgLy8gU2VuZCBBSSBDb25maWcgaWYgYXZhaWxhYmxlXG4gIGlmIChhaUNvbmZpZykge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2ZiQWRzQ29uZmlnJywgeyBkZXRhaWw6IGFpQ29uZmlnIH0pO1xuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfSwgNTAwKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJzY3JhcGVyU2NyaXB0Il0sIm1hcHBpbmdzIjoiQUFDQSxRQUFRLElBQUkseUNBQXlDO0FBR3JELE9BQU8sUUFBUSxVQUFVLFlBQVksQ0FBQyxTQUFTLFFBQVEsaUJBQWlCO0FBQ3RFLE1BQUksUUFBUSxXQUFXLGlCQUFpQjtBQUN0QyxZQUFRLElBQUksNkNBQTZDO0FBQ3pELCtCQUEyQixRQUFRLFFBQVE7QUFDM0MsaUJBQWEsRUFBRSxRQUFRLFdBQVc7QUFBQSxFQUNwQyxXQUFXLFFBQVEsV0FBVyxjQUFjLFFBQVEsV0FB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
})()
