<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FB Ads Campaign Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 320px;
            padding: 0;
        }

        .container {
            background: white;
            border-radius: 0;
        }

        .header {
            background: white;
            color: #111827;
            padding: 24px;
            text-align: center;
            border-bottom: 1px solid #e5e7eb;
        }

        .header h1 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 13px;
            opacity: 0.9;
        }

        .auth-box {
            padding: 24px 24px 12px 24px;
            text-align: center;
        }

        .content {
            padding: 12px 24px 24px 24px;
        }

        .icon {
            text-align: center;
            margin-bottom: 16px;
            color: #6366f1;
        }

        .btn {
            width: 100%;
            padding: 14px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: #374151;
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            background: #1f2937;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: white;
            color: #374151;
            border: 2px solid #e5e7eb;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary:hover {
            background: #f9fafb;
            border-color: #d1d5db;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .btn-secondary:active {
            transform: translateY(0);
        }

        .btn-success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #86efac;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .btn-success:hover {
            background: #bbf7d0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .btn-success:active {
            transform: translateY(0);
        }

        .icon svg {
            width: 64px;
            height: 64px;
        }

        .title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
            text-align: center;
            margin-bottom: 8px;
        }

        .description {
            font-size: 14px;
            color: #6b7280;
            text-align: center;
            margin-bottom: 24px;
            line-height: 1.5;
        }

        .features {
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
        }

        .feature {
            display: flex;
            align-items: start;
            gap: 12px;
            margin-bottom: 12px;
            font-size: 13px;
            color: #6b7280;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            margin-bottom: 12px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
        }

        .btn svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .status {
            margin-top: 16px;
            padding: 12px;
            border-radius: 6px;
            font-size: 13px;
            text-align: center;
            display: none;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .status svg {
            width: 18px;
            height: 18px;
            fill: currentColor;
        }

        .status.show {
            display: flex;
        }

        .feature-icon {
            flex-shrink: 0;
            margin-top: 2px;
            color: #f59e0b;
        }

        .feature-icon svg {
            width: 18px;
            height: 18px;
            fill: currentColor;
        }

        #togglePasswordBtn svg {
            width: 20px;
            height: 20px;
            fill: #6b7280;
        }

        .error-text {
            color: #ef4444;
            font-size: 12px;
            margin-top: 8px;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Common Header -->
        <div class="header">
            <h1 style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                <img src="/logo.jpg"
                    style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 1px solid #e5e7eb;">
                FB Ads Analyzer
            </h1>
            <p>Campaign Timeline Visualizer</p>
        </div>

        <!-- Auth Section -->
        <div id="authSection" class="auth-box">


            <div id="loginForm">
                <input type="email" id="emailInput" placeholder="Email" class="input-field" />
                <div style="position: relative; margin-bottom: 12px;">
                    <input type="password" id="passwordInput" placeholder="Password" class="input-field"
                        style="padding-right: 40px; margin-bottom: 0;" />
                    <span id="togglePasswordBtn"
                        style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; opacity: 0.6; display: flex;">
                        <!-- Visibility Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path
                                d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                        </svg>
                    </span>
                </div>
                <button id="loginBtn" class="btn btn-primary" style="margin-bottom: 8px;">Login</button>
                <button id="signupBtn" class="btn btn-secondary" style="margin-bottom: 8px;">Sign Up</button>
                <div style="text-align: center;">
                    <a href="#" id="forgotPasswordLink"
                        style="font-size: 13px; color: #6b7280; text-decoration: none;">Forgot Password?</a>
                </div>
                <div id="authError" class="error-text"></div>
            </div>

            <div id="resetPasswordForm" style="display: none;">
                <h3 style="margin-bottom: 8px; color: #111827;">Reset Password</h3>
                <p style="font-size: 13px; color: #6b7280; margin-bottom: 12px;">Enter your email to receive a reset
                    link.</p>
                <input type="email" id="resetEmailInput" placeholder="Email" class="input-field" />
                <button id="sendResetBtn" class="btn btn-primary" style="margin-bottom: 8px;">Send Reset Link</button>
                <button id="backToLoginBtn" class="btn btn-secondary">Back to Login</button>
                <div id="resetError" class="error-text"></div>
                <div id="resetSuccess" class="status success" style="margin-top: 8px;"></div>
            </div>

            <div id="userProfile" style="display: none;">
                <p style="margin-bottom: 8px; color: #374151;">Logged in as <br><strong id="userEmail"></strong></p>

                <div
                    style="background: #f3f4f6; padding: 10px; border-radius: 6px; margin-top: 10px; text-align: left; font-size: 13px; border: 1px solid #e5e7eb;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="color: #6b7280;">Plan:</span>
                        <strong id="userTier" style="color: #374151;">...</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #6b7280;">Monthly Runs:</span>
                        <strong id="userUsage" style="color: #6b7280;">...</strong>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content (Hidden by default) -->
        <div id="mainContent" style="display: none;">


            <div class="content">
                <div class="icon">
                    <!-- Analytics Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2v-4h2v4zm4 0h-2v-2h2v2z" />
                    </svg>
                </div>
                <div class="title">Analyze Facebook Ads</div>
                <div class="description" id="description">
                    Start a new analysis or load previously exported data
                </div>

                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <button class="btn btn-primary" id="startBtn">
                        <!-- Rocket Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M13.13 22.19L11.5 18.36C13.07 17.78 14.54 17 15.9 16.09L13.13 22.19M5.64 12.5L1.81 10.87L7.91 8.1C7 9.46 6.22 10.93 5.64 12.5M21.61 2.39C21.61 2.39 16.66 .29 11 5.96C6.91 10.06 6.45 15.17 6.8 16.22C6.9 16.53 7.21 16.67 7.5 16.5L10.33 15.08L15.08 10.33C15.91 9.5 17.25 9.5 18.08 10.33C18.91 11.16 18.91 12.5 18.08 13.33L13.33 18.08L11.92 20.91C11.75 21.2 11.89 21.5 12.2 21.61C13.25 21.96 18.35 21.5 22.45 17.41C28.12 11.75 26.02 6.8 26.02 6.8L21.61 2.39Z" />
                        </svg>
                        <span>Start Analysis</span>
                    </button>

                    <button class="btn btn-success" id="reopenBtn" style="display: none;">
                        <!-- Folder Open Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z" />
                        </svg>
                        <span>Reopen Last Analysis</span>
                    </button>
                </div>

                <div style="margin: 16px 0; text-align: center; color: #9ca3af; font-size: 12px;" id="orDivider">
                    or
                </div>

                <button class="btn btn-secondary" id="importBtn">
                    <!-- Folder Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z" />
                    </svg>
                    <span>Import JSON Data</span>
                </button>
                <input type="file" id="fileInput" accept=".json" style="display: none;">

                <div class="status" id="status"></div>

                <div class="features">
                    <div class="feature">
                        <div class="feature-icon">
                            <!-- Bolt Icon -->
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66.19-.34.05-.08.07-.12C7.56 12.64 12.66 3.666 12.72 3M11 21L11 21v-7h3.5c.58 0 .57.32.38.66-.19.34-.05.08-.07.12C14.44 15.36 9.34 24.33 9.28 25" />
                            </svg>
                        </div>
                        <div>Auto-scrolls and extracts all ads</div>
                    </div>
                </div>

                <button id="logoutBtn" class="btn btn-secondary btn-small" style="margin-top: 16px;">Logout</button>
            </div>
        </div>
    </div>

    <script type="module" src="popup.js"></script>
</body>

</html>